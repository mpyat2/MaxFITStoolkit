Відмінності між FITSUTILS, IRIS та SIRIL

Загальні зауваження
IRIS працює з CFA-файлами "не з того боку" (плутанина виникає з різної інтерпретації початку вісі Y -- згори вниз чи знизу вгору).
Тому для нього баєрівська матриця для різних камер, які відрізняються парним-непарним числом горизонтальних ліній, виглядають по-різному, 
хоча, правильно вибравши початок вісі Y (протилежний напрямок, ныж той, що в IRIS), різноманітність зменшується (при тому, що IRIS використовує код DCRAW, з якого походить бібліотека LibRaw).
Наприклад, Canon 600D та Canon 350D для IRIS мають різний баэрівський патерн, однак з точки зору LibRaw -- однаковий, RGGB.
Утіліта дебаєризації CFA2RGB використовує "правильний" початок вісі Y (той самий, що і LibRaw/DCRAW), тому для неї (як і для LibRaw/DCRAW) порядок кольорів для Canon 600D та Canon 350D однаковий.

Є ще невелика різниця у випадках, коли значення пікселів округлюються до цілого після операцій усереднення: IRIS та SIRIL використовують "математичне" округлення (половинка завжи округлюється до більшого),
FITSUTILS використовують banker's rounding, коли округлення половинок йде до найближчого парного числа (це "статистично краще"). Є можливіть перекомпілювати всі утіліти з використанням математичного округлення, див. FITSUTILS.INC.

1a) Утіліта CFA2RGB: Суперпіксельна дебаєризація (коли баєрівський суперпіксель 2*2 перетворюється у єдиний кольоровий піксель) працює так само, як і у Siril, за виключенням того, що для матриць з непарним числом
горизонтальних ліній Siril додає один пустий рядок, а CFA2RGB пустого рядку не додає, тобто результат на одну горизонтальну лінію менший. Якщо число ліній парне, то різниці нема.
Цей тип дебаєризації відсутній у IRIS.

1a) Утіліта "CFA2RGB /2": Білінійна дебаєризація: різниці між "CFA2RGB /2" та Siril нема, з IRIS є різниця у пікселях на краях зображення: "CFA2RGB /2" та Siril дають однопіксельну пусту рамку, IRIS з одного боку пікселі заповнює

2) Утіліта FITSCFA розбиває CFA-зображення на кольорові канали. У Siril такого ще нема, здається, IRIS маэ команду SPLIT_CFA. FITSCFA працює так, як і SPLIT_CFA (крім того, FITSCFA дозволяє такоє зробити з кількох 
каналів один, наприклад, з двох зелених -- один усереднений). Різниця є: деякі канали зміщені на один піксель по вертикалі відносно тих, що дає IRIS. 
Можна було б досягти повного співпадіння з IRIS (це, до речі, було в самій першій версії утіліт, для цього троба було починати розбирати CFA з іншого буку вісі Y), однак я свыдомо вибрав варіант, сумісний з
суперпіксельною дебаєризацєю: з каналів, які генерує FITSCFA можна зібрати той самий результат, що дає CFA2RGB (в режимі суперпікселя)

3) MakeStack: обраховує медіану завжди "чесно" (хоч потребуэ багато пам'яті), а IRIS, у випадку великого вхідного масиву, переходить на якийсь спрощений приблизний алгоритм обрахування медіани (зате економний та швидкий).

Інші утіліти або не мають прямих аналогів, або працюють так само, як IRIS або SIRIL.

ЩО НОВОГО у версії 1.1.2 (змінити версію утіліт!!!)

MakeStack йде у 64-бітному варіанті (грубою силою розширена доступна пам'ять), також є 32-бітний варіант MakeStack32 для число 32-бітних систем.
Також MakeStack тепер кількапоточний (за замовчанням використовує стільки потоків, скільки логічних процесорів, хоч, якщо задати число потоків на один менше (параметр /T=), то працює трошки швидше на деяких системах).
В режимі 16-бітних FITS (без BSCALE/BZERO, як в IRIS) 

ICONVRAW: 64bit!!! Check speed!!!!

CFA2RGB поки що (до переробки) обмежена лише 16-бітними FITS (які можуть бути з BSCALE/BZERO) задля ефективності.

FITSTAT: тепер дає статистику також про багатошарові (кольорові) FITS. Також виправлена дурна помилка обрахування середнього по пікселям (сума по N-пікселям ділилась не на N, а на N-1, оскільки N дуже велике, не помітив), також дещо пришвидшена.

Технічно всі утіліти можуть бути зібрані як 64-бітні, однак тести показали, що швидкість роботи 32-бітних варіантів (там, де арифметика з цілими числами) швидше. Є дані, що FPC 64-bit погано оптимізований 
для операцій з цілими числами (32-бітна арифметика теж не супер, відстає від C-компіляторів, однак не так сильно). Тести ще продовжуються, може, не все так однозначно.
(перевірити LIBRAW!)
